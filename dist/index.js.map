{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../src/global.ts","../src/sprite.ts","../src/loading.ts","../src/actions.ts","../src/async.tsx","../src/ErrorBoundary.tsx","../src/Application.tsx","../src/store.ts","../src/createApp.ts","../src/model.ts","../src/view.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { RouterState } from \"connected-react-router\";\r\nimport { History } from \"history\";\r\nimport { ComponentType } from \"react\";\r\nimport { Action, AnyAction, Store } from \"redux\";\r\nimport { TaskCounterState as LoadingState } from \"./sprite\";\r\nexport interface SingleStore {\r\n  dispatch: (action: { type: string }) => void;\r\n}\r\nexport interface ModuleState {\r\n  loading: { [key: string]: LoadingState };\r\n}\r\nexport interface RootState<P = {}> {\r\n  router: RouterState;\r\n  project: P;\r\n}\r\n\r\nexport interface ActionCreatorMap {\r\n  [moduleName: string]: ActionCreatorList;\r\n}\r\nexport interface ActionCreatorList {\r\n  [actionName: string]: ActionCreator;\r\n}\r\nexport type ActionCreator = (payload?) => Action;\r\n\r\nexport interface ActionHandler {\r\n  __isReducer__?: boolean;\r\n  __isEffect__?: boolean;\r\n  __isHandler__?: boolean;\r\n  __decorators__?: Array<[(action: Action, moduleName: string) => any, any, any]>;\r\n  (payload?): any;\r\n}\r\n\r\nexport interface ActionHandlerList {\r\n  [actionName: string]: ActionHandler;\r\n}\r\nexport interface ActionHandlerMap {\r\n  [actionName: string]: { [moduleName: string]: ActionHandler };\r\n}\r\nexport interface Model {\r\n  namespace: string;\r\n  actions: ActionHandlerList;\r\n}\r\nexport interface Views {\r\n  [viewName: string]: ComponentType<any>;\r\n}\r\nexport interface ModuleViews {\r\n  default: Views;\r\n}\r\nexport const ERROR = \"@@framework/ERROR\";\r\nexport const LOADING = \"LOADING\";\r\nexport const INIT = \"INIT\";\r\nexport const START = \"START\";\r\nexport const STARTED = \"STARTED\";\r\nexport const INIT_LOCATION = \"@@router/LOCATION_CHANGE\";\r\nexport const LOCATION_CHANGE = \"@@router/LOCATION_CHANGE\";\r\nexport const NSP = \"/\";\r\n\r\nexport const MetaData: {\r\n  history: History;\r\n  singleStore: SingleStore;\r\n  rootState: RootState;\r\n  actionCreatorMap: ActionCreatorMap;\r\n  injectedModules: Action[];\r\n  reducerMap: ActionHandlerMap;\r\n  effectMap: ActionHandlerMap;\r\n} = {\r\n  history: null,\r\n  reducerMap: {},\r\n  effectMap: {},\r\n  injectedModules: [],\r\n  actionCreatorMap: {},\r\n  rootState: { project: {}, router: null },\r\n  singleStore: null,\r\n};\r\n\r\nexport function errorAction(error: any) {\r\n  return {\r\n    type: ERROR,\r\n    error,\r\n  };\r\n}\r\n\r\nexport function initLocationAction(namespace: string, payload: any) {\r\n  return {\r\n    type: namespace + NSP + INIT_LOCATION,\r\n    payload,\r\n  };\r\n}\r\nexport function delayPromise(second: number) {\r\n  return (target, propertyKey: string, descriptor: PropertyDescriptor) => {\r\n    const fun = descriptor.value;\r\n    descriptor.value = (...args) => {\r\n      const delay = new Promise(resolve => {\r\n        setTimeout(() => {\r\n          resolve(true);\r\n        }, second * 1000);\r\n      });\r\n      return Promise.all([delay, fun.apply(target, args)]).then(items => {\r\n        return items[1];\r\n      });\r\n    };\r\n  };\r\n}\r\nexport function getStore<S = any, A extends Action = AnyAction>(): Store<S, A> {\r\n  return MetaData.singleStore as any;\r\n}\r\nexport function getHistory(): History {\r\n  return MetaData.history;\r\n}\r\n","function emptyObject<T>(obj: any): T {\r\n  const arr: string[] = [];\r\n  for (const key in obj) {\r\n    if (obj.hasOwnProperty(key)) {\r\n      arr.push(key);\r\n    }\r\n  }\r\n  arr.forEach((key: string) => {\r\n    delete obj[key];\r\n  });\r\n  return obj;\r\n}\r\nfunction findIndexInArray<T>(arr: T[], fun: (item: T) => boolean): number {\r\n  for (let i = 0, k = arr.length; i < k; i++) {\r\n    if (fun(arr[i])) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\nexport const TaskCountEvent = \"TaskCountEvent\";\r\n\r\nexport type TaskCounterState = \"Start\" | \"Stop\" | \"Depth\";\r\n\r\nexport class PEvent {\r\n  public readonly target: PDispatcher;\r\n  public readonly currentTarget: PDispatcher;\r\n\r\n  constructor(public readonly name: string, public readonly data?: any, public bubbling: boolean = false) {}\r\n\r\n  public setTarget(target: PDispatcher) {\r\n    (this as any).target = target;\r\n  }\r\n\r\n  public setCurrentTarget(target: PDispatcher) {\r\n    (this as any).currentTarget = target;\r\n  }\r\n}\r\n\r\nexport class PDispatcher {\r\n  protected readonly storeHandlers: {\r\n    [key: string]: Array<(e: PEvent) => void>;\r\n  } = {};\r\n\r\n  constructor(public readonly parent?: PDispatcher | undefined) {}\r\n\r\n  public addListener(ename: string, handler: (e: PEvent) => void): this {\r\n    let dictionary = this.storeHandlers[ename];\r\n    if (!dictionary) {\r\n      this.storeHandlers[ename] = dictionary = [];\r\n    }\r\n    dictionary.push(handler);\r\n    return this;\r\n  }\r\n\r\n  public removeListener(ename?: string, handler?: (e: PEvent) => void): this {\r\n    if (!ename) {\r\n      emptyObject(this.storeHandlers);\r\n    } else {\r\n      const handlers = this.storeHandlers;\r\n      if (handlers.propertyIsEnumerable(ename)) {\r\n        const dictionary = handlers[ename];\r\n        if (!handler) {\r\n          delete handlers[ename];\r\n        } else {\r\n          const n = dictionary.indexOf(handler);\r\n          if (n > -1) {\r\n            dictionary.splice(n, 1);\r\n          }\r\n          if (dictionary.length === 0) {\r\n            delete handlers[ename];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public dispatch(evt: PEvent): this {\r\n    if (!evt.target) {\r\n      evt.setTarget(this);\r\n    }\r\n    evt.setCurrentTarget(this);\r\n    const dictionary = this.storeHandlers[evt.name];\r\n    if (dictionary) {\r\n      for (let i = 0, k = dictionary.length; i < k; i++) {\r\n        dictionary[i](evt);\r\n      }\r\n    }\r\n    if (this.parent && evt.bubbling) {\r\n      this.parent.dispatch(evt);\r\n    }\r\n    return this;\r\n  }\r\n  public setParent(parent?: PDispatcher): this {\r\n    (this as any).parent = parent;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport class TaskCounter extends PDispatcher {\r\n  public readonly list: Array<{ promise: Promise<any>; note: string }> = [];\r\n  private ctimer: number;\r\n  constructor(public deferSecond: number) {\r\n    super();\r\n  }\r\n  public addItem(promise: Promise<any>, note: string = \"\"): Promise<any> {\r\n    if (!this.list.some(item => item.promise === promise)) {\r\n      this.list.push({ promise, note });\r\n      promise.then(value => this.completeItem(promise), reason => this.completeItem(promise));\r\n      if (this.list.length === 1) {\r\n        this.dispatch(new PEvent(TaskCountEvent, \"Start\"));\r\n        this.ctimer = window.setTimeout(() => {\r\n          this.ctimer = 0;\r\n          if (this.list.length > 0) {\r\n            this.dispatch(new PEvent(TaskCountEvent, \"Depth\"));\r\n          }\r\n        }, this.deferSecond * 1000);\r\n      }\r\n    }\r\n    return promise;\r\n  }\r\n  private completeItem(promise: Promise<any>): this {\r\n    const i = findIndexInArray(this.list, item => item.promise === promise);\r\n    if (i > -1) {\r\n      this.list.splice(i, 1);\r\n      if (this.list.length === 0) {\r\n        if (this.ctimer) {\r\n          clearTimeout(this.ctimer);\r\n          this.ctimer = 0;\r\n        }\r\n\r\n        this.dispatch(new PEvent(TaskCountEvent, \"Stop\"));\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n}\r\n","import { LOADING, MetaData } from \"./global\";\r\nimport { TaskCounter, TaskCountEvent } from \"./sprite\";\r\n\r\nconst loadings: { [namespace: string]: TaskCounter } = {};\r\n\r\nlet depthTime: number = 2;\r\n\r\nexport function setLoadingDepthTime(second: number) {\r\n  depthTime = second;\r\n}\r\nexport function setLoading<T>(item: T, namespace: string = \"app\", group: string = \"global\"): T {\r\n  const key = namespace + \"/\" + group;\r\n  if (!loadings[key]) {\r\n    loadings[key] = new TaskCounter(depthTime);\r\n    loadings[key].addListener(TaskCountEvent, e => {\r\n      const store = MetaData.singleStore;\r\n      if (store) {\r\n        const action = MetaData.actionCreatorMap[namespace][LOADING]({ [group]: e.data });\r\n        store.dispatch(action);\r\n      }\r\n    });\r\n  }\r\n  loadings[key].addItem(item as any);\r\n  return item;\r\n}\r\n","import { Action } from \"redux\";\r\nimport { SagaIterator } from \"redux-saga\";\r\nimport { call, CallEffect, put, PutEffect } from \"redux-saga/effects\";\r\nimport { ActionHandler, INIT, LOADING, MetaData, ModuleState, NSP, RootState, START, STARTED } from \"./global\";\r\nimport { setLoading } from \"./loading\";\r\n\r\nexport { PutEffect };\r\nexport class BaseModuleActions<S extends ModuleState, R extends RootState> {\r\n  protected readonly namespace: string;\r\n  protected readonly initState: S;\r\n\r\n  protected call: typeof call = call;\r\n  protected callPromise: CallPromise = callPromise;\r\n  protected get state(): S {\r\n    return MetaData.rootState.project[this.namespace];\r\n  }\r\n  protected get rootState(): R {\r\n    return MetaData.rootState as any;\r\n  }\r\n  protected put(action: Action | S | SagaIterator) {\r\n    // let type: string = (action as any).type;\r\n    // const arr = type.split(NSP);\r\n    // if (!arr[1]) {\r\n    //   type = this.namespace + NSP + type;\r\n    //   if (MetaData.reducerMap[type] || MetaData.effectMap[type]) {\r\n    //     (action as any).type = type;\r\n    //   }\r\n    // }\r\n    return put(action as any);\r\n  }\r\n  @reducer\r\n  [INIT](): S {\r\n    return this.initState;\r\n  }\r\n  @reducer\r\n  [STARTED](payload: S): S {\r\n    return payload;\r\n  }\r\n  @reducer\r\n  [LOADING](payload: { [group: string]: string }): S {\r\n    const state = this.state as any;\r\n    if (!state) {\r\n      return state;\r\n    }\r\n    return {\r\n      ...state,\r\n      loading: { ...state.loading, ...payload },\r\n    };\r\n  }\r\n  @effect\r\n  *[START](): SagaIterator {\r\n    yield this.put(this.STARTED(this.state));\r\n  }\r\n}\r\nexport function logger(before: (action: Action, moduleName: string) => void, after: (beforeData: any, data: any) => void) {\r\n  return (target: any, key: string, descriptor: PropertyDescriptor) => {\r\n    const fun: ActionHandler = descriptor.value;\r\n    if (!fun.__decorators__) {\r\n      fun.__decorators__ = [];\r\n    }\r\n    fun.__decorators__.push([before, after, null]);\r\n  };\r\n}\r\nexport function loading(loadingKey: string = \"app/global\") {\r\n  return (target: any, key: string, descriptor: PropertyDescriptor) => {\r\n    const fun: ActionHandler = descriptor.value;\r\n    if (loadingKey) {\r\n      const before = (curAction: Action, moduleName: string) => {\r\n        let loadingCallback: Function | null = null;\r\n        let [loadingForModuleName, loadingForGroupName] = loadingKey.split(NSP);\r\n        if (!loadingForGroupName) {\r\n          loadingForGroupName = loadingForModuleName;\r\n          loadingForModuleName = moduleName;\r\n        }\r\n        setLoading(\r\n          new Promise<any>((resolve, reject) => {\r\n            loadingCallback = resolve;\r\n          }),\r\n          loadingForModuleName,\r\n          loadingForGroupName,\r\n        );\r\n        return loadingCallback;\r\n      };\r\n      const after = (resolve, error?) => {\r\n        resolve(error);\r\n      };\r\n\r\n      if (!fun.__decorators__) {\r\n        fun.__decorators__ = [];\r\n      }\r\n      fun.__decorators__.push([before, after, null]);\r\n    }\r\n  };\r\n}\r\nexport const globalLoading = loading();\r\n\r\nexport function reducer(target: any, key: string, descriptor: PropertyDescriptor) {\r\n  const fun = descriptor.value as ActionHandler;\r\n  fun.__isReducer__ = true;\r\n}\r\nexport function effect(target: any, key: string, descriptor: PropertyDescriptor) {\r\n  const fun = descriptor.value as ActionHandler;\r\n  fun.__isEffect__ = true;\r\n}\r\nexport interface CallProxy<T> extends CallEffect {\r\n  getResponse: () => T;\r\n}\r\n\r\nexport interface CallPromise {\r\n  <T>(fn: () => Promise<T>): CallProxy<T>;\r\n  <T, R1, A1 extends R1>(fn: (req1: R1) => Promise<T>, arg1: A1): CallProxy<T>;\r\n  <T, R1, R2, A1 extends R1, A2 extends R2>(fn: (req1: R1, req2: R2) => Promise<T>, arg1: A1, arg2: A2): CallProxy<T>;\r\n  <T, R1, R2, R3, A1 extends R1, A2 extends R2, A3 extends R3>(fn: (req1: R1, req2: R2, req3: R3) => Promise<T>, arg1: A1, arg2: A2, arg3: A3): CallProxy<T>;\r\n  <T, R1, R2, R3, R4, A1 extends R1, A2 extends R2, A3 extends R3, A4 extends R4>(fn: (req1: R1, req2: R2, req3: R3, req4: R4) => Promise<T>, arg1: A1, arg2: A2, arg3: A3, arg4: A4): CallProxy<T>;\r\n  <T, R1, R2, R3, R4, R5, A1 extends R1, A2 extends R2, A3 extends R3, A4 extends R4, A5 extends R5>(fn: (req1: R1, req2: R2, req3: R3, req4: R4, req5: R5) => Promise<T>, arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5): CallProxy<T>;\r\n}\r\nexport const callPromise: CallPromise = (fn: (...args) => any, ...rest) => {\r\n  let response: any;\r\n  const proxy = (...args) => {\r\n    return fn(...args).then(\r\n      res => {\r\n        response = res;\r\n        return response;\r\n      },\r\n      rej => {\r\n        response = rej;\r\n        throw rej;\r\n      },\r\n    );\r\n  };\r\n  const callEffect = (call as any)(proxy, ...rest);\r\n  (callEffect as any).getResponse = () => {\r\n    return response;\r\n  };\r\n  return callEffect;\r\n};\r\n","import React from \"react\";\r\nimport { connect, DispatchProp } from \"react-redux\";\r\nimport { errorAction, ModuleViews } from \"./global\";\r\nimport { setLoading } from \"./loading\";\r\n\r\nconst defaultLoadingComponent = () => <div className=\"react-coat-asyncComponent-loading\">Loading...</div>;\r\nconst defaultErrorComponent = (props: { message: string }) => {\r\n  return <div className=\"react-coat-asyncComponent-error\">Error: {props.message}</div>;\r\n};\r\n\r\nexport function async(resolve: () => Promise<ModuleViews>, componentName: string = \"Main\", defLoadingComponent: React.ComponentType<any> = defaultLoadingComponent, ErrorComponent: React.ComponentType<any> = defaultErrorComponent) {\r\n  class AsyncComponent extends React.Component<DispatchProp> {\r\n    public state: {\r\n      Component: React.ComponentType<any> | null;\r\n    };\r\n    private LoadingComponent: React.ComponentType<any>;\r\n    private ErrorComponent: React.ComponentType<any>;\r\n    private errorMessage: string;\r\n    constructor(props: { dispatch: any }, context?: any) {\r\n      super(props, context);\r\n      this.LoadingComponent = defLoadingComponent;\r\n      this.ErrorComponent = ErrorComponent;\r\n      this.state = {\r\n        Component: null,\r\n      };\r\n    }\r\n    public shouldComponentUpdate(nextProps: any, nextState: any) {\r\n      return nextState.Component !== this.state.Component;\r\n    }\r\n    public componentDidMount() {\r\n      const promise = resolve()\r\n        .then(module => {\r\n          const Component = module.default[componentName];\r\n          this.setState({\r\n            Component,\r\n          });\r\n        })\r\n        .catch(errorData => {\r\n          this.errorMessage = errorData.message;\r\n          const Component = this.ErrorComponent;\r\n          this.props.dispatch(errorAction(errorData));\r\n          this.setState({\r\n            Component,\r\n          });\r\n        });\r\n      setLoading(promise);\r\n    }\r\n\r\n    public render() {\r\n      const { Component } = this.state;\r\n      const { LoadingComponent } = this;\r\n      if (Component) {\r\n        if (Component === this.ErrorComponent) {\r\n          return <Component message={this.errorMessage} {...this.props} />;\r\n        } else {\r\n          return <Component {...this.props} />;\r\n        }\r\n      } else {\r\n        return <LoadingComponent {...this.props} />;\r\n      }\r\n    }\r\n  }\r\n\r\n  return connect()(AsyncComponent);\r\n}\r\n","import React from \"react\";\r\nimport { connect, DispatchProp } from \"react-redux\";\r\nimport { errorAction } from \"./global\";\r\n\r\nexport interface State {\r\n  message: string;\r\n}\r\n\r\nclass ErrorBoundary extends React.PureComponent<DispatchProp<any>, State> {\r\n  public state = {\r\n    message: \"\",\r\n  };\r\n  public render() {\r\n    if (this.state.message) {\r\n      return <div>failed to render, error: {this.state.message}</div>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n  public componentDidCatch(error: Error) {\r\n    this.setState({ message: error.message });\r\n    this.props.dispatch(errorAction(error));\r\n  }\r\n}\r\n\r\nexport default connect()(ErrorBoundary);\r\n","import { ConnectedRouter } from \"connected-react-router\";\r\nimport { History } from \"history\";\r\nimport React, { ComponentType } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Middleware, Store } from \"redux\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\n\r\nexport default function buildApp(view: ComponentType<any>, container: string, storeMiddlewares: Middleware[], storeEnhancers: Function[], store: Store, history: History) {\r\n  const WithRouter = withRouter(view);\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <ErrorBoundary>\r\n        <ConnectedRouter history={history}>\r\n          <WithRouter />\r\n        </ConnectedRouter>\r\n      </ErrorBoundary>\r\n    </Provider>,\r\n    document.getElementById(container),\r\n  );\r\n}\r\n","import { connectRouter, routerMiddleware } from \"connected-react-router\";\r\nimport { History } from \"history\";\r\nimport { Action, AnyAction, applyMiddleware, combineReducers, compose, createStore, Middleware, ReducersMapObject, Store } from \"redux\";\r\nimport createSagaMiddleware, { SagaMiddleware } from \"redux-saga\";\r\nimport { put, takeEvery } from \"redux-saga/effects\";\r\nimport { errorAction, initLocationAction, INIT_LOCATION, MetaData, NSP, STARTED } from \"./global\";\r\n\r\nfunction hasLocationChangeHandler(moduleName: string) {\r\n  const actionName = moduleName + NSP + INIT_LOCATION;\r\n  return !!MetaData.effectMap[actionName] || !!MetaData.reducerMap[actionName];\r\n}\r\nfunction getActionData(action: {}) {\r\n  const arr = Object.keys(action).filter(key => key !== \"type\");\r\n  if (arr.length === 0) {\r\n    return undefined;\r\n  } else if (arr.length === 1) {\r\n    return action[arr[0]];\r\n  } else {\r\n    const data = { ...action };\r\n    delete data[\"type\"];\r\n    return data;\r\n  }\r\n}\r\nfunction rootReducer(combineReducer: Function) {\r\n  return (state: any | undefined, action: Action) => {\r\n    MetaData.rootState = state || {};\r\n    MetaData.rootState = combineReducer(state, action);\r\n    return MetaData.rootState;\r\n  };\r\n}\r\nfunction reducer(state: any = {}, action: Action) {\r\n  const item = MetaData.reducerMap[action.type];\r\n  if (item && MetaData.singleStore) {\r\n    const newState = { ...state };\r\n    const list: string[] = [];\r\n    Object.keys(item).forEach(namespace => {\r\n      const fun = item[namespace];\r\n      if (fun.__isHandler__) {\r\n        list.push(namespace);\r\n      } else {\r\n        list.unshift(namespace);\r\n      }\r\n    });\r\n    list.forEach(namespace => {\r\n      const fun = item[namespace];\r\n      const decorators: Array<[(action: Action, moduleName: string) => any, (data: any, state: any) => void, any]> = fun.__decorators__;\r\n      if (decorators) {\r\n        decorators.forEach(decorator => {\r\n          decorator[2] = decorator[0](action, namespace);\r\n        });\r\n      }\r\n      const result = fun(getActionData(action));\r\n      newState[namespace] = result;\r\n      MetaData.rootState = { ...MetaData.rootState, project: { ...MetaData.rootState.project, [namespace]: result } };\r\n      if (action.type === namespace + NSP + STARTED) {\r\n        // 对模块补发一次locationChange\r\n        setTimeout(() => {\r\n          if (MetaData.singleStore && hasLocationChangeHandler(namespace)) {\r\n            MetaData.singleStore.dispatch(initLocationAction(namespace, MetaData.rootState.router));\r\n          }\r\n        }, 0);\r\n      }\r\n      if (decorators) {\r\n        decorators.forEach(decorator => {\r\n          decorator[1](decorator[2], newState[namespace]);\r\n          decorator[2] = null;\r\n        });\r\n      }\r\n    });\r\n    return newState;\r\n  }\r\n  return state;\r\n}\r\nfunction* effect(action: Action) {\r\n  const item = MetaData.effectMap[action.type];\r\n  if (item && MetaData.singleStore) {\r\n    const list: string[] = [];\r\n    Object.keys(item).forEach(namespace => {\r\n      const fun = item[namespace];\r\n      if (fun.__isHandler__) {\r\n        list.push(namespace);\r\n      } else {\r\n        list.unshift(namespace);\r\n      }\r\n    });\r\n    for (const moduleName of list) {\r\n      const fun = item[moduleName];\r\n      const decorators: Array<[(action: Action, moduleName: string) => any, (data: any, error?: Error) => void, any]> | null = fun.__decorators__;\r\n      let err: Error | undefined;\r\n      if (decorators) {\r\n        decorators.forEach(decorator => {\r\n          decorator[2] = decorator[0](action, moduleName);\r\n        });\r\n      }\r\n      try {\r\n        yield* fun(getActionData(action));\r\n      } catch (error) {\r\n        err = error;\r\n      }\r\n      if (err) {\r\n        yield put(errorAction(err));\r\n      }\r\n      if (decorators) {\r\n        decorators.forEach(decorator => {\r\n          decorator[1](decorator[2], err);\r\n          decorator[2] = null;\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction* saga() {\r\n  yield takeEvery(\"*\", effect);\r\n}\r\nexport function buildStore(storeHistory: History, reducers: ReducersMapObject, storeMiddlewares: Middleware[], storeEnhancers: Function[]) {\r\n  let devtools = (options: any) => (noop: any) => noop;\r\n  if (process.env.NODE_ENV !== \"production\" && window[\"__REDUX_DEVTOOLS_EXTENSION__\"]) {\r\n    devtools = window[\"__REDUX_DEVTOOLS_EXTENSION__\"];\r\n  }\r\n  if (reducers.router || reducers.project) {\r\n    throw new Error(\"the reducer name 'router' 'project' is not allowed\");\r\n  }\r\n  reducers.project = reducer;\r\n  const routingMiddleware = routerMiddleware(storeHistory);\r\n  const sagaMiddleware: SagaMiddleware<any> = createSagaMiddleware();\r\n  const middlewares = [...storeMiddlewares, routingMiddleware, sagaMiddleware];\r\n  const enhancers = [...storeEnhancers, applyMiddleware(...middlewares), devtools(window[\"__REDUX_DEVTOOLS_EXTENSION__OPTIONS\"])];\r\n  const store: Store<any, AnyAction> = createStore(rootReducer(connectRouter(storeHistory)(combineReducers(reducers))), {}, compose(...enhancers));\r\n  MetaData.singleStore = store;\r\n  sagaMiddleware.run(saga);\r\n  window.onerror = (message: string, filename?: string, lineno?: number, colno?: number, error?: Error) => {\r\n    store.dispatch(errorAction(error || { message }));\r\n  };\r\n\r\n  MetaData.injectedModules.forEach(action => {\r\n    store.dispatch(action);\r\n  });\r\n  MetaData.injectedModules.length = 0;\r\n  return store;\r\n}\r\n","import { History } from \"history\";\r\nimport createHistory from \"history/createBrowserHistory\";\r\nimport { ComponentType } from \"react\";\r\nimport { Middleware, ReducersMapObject } from \"redux\";\r\nimport buildApp from \"./Application\";\r\nimport { MetaData } from \"./global\";\r\nimport { buildStore } from \"./store\";\r\n\r\nexport function createApp(view: ComponentType<any>, container: string, storeMiddlewares: Middleware[] = [], storeEnhancers: Function[] = [], reducers: ReducersMapObject = {}, storeHistory?: History) {\r\n  MetaData.history = storeHistory || createHistory();\r\n  const store = buildStore(MetaData.history, reducers, storeMiddlewares, storeEnhancers);\r\n  buildApp(view, container, storeMiddlewares, storeEnhancers, store, MetaData.history);\r\n}\r\n","import { SagaIterator } from \"redux-saga\";\r\n\r\nexport type ActionCreator<P> = (\r\n  payload: P,\r\n) => {\r\n  type: string;\r\n  payload: P;\r\n};\r\nexport type EmptyActionCreator = () => {\r\n  type: string;\r\n};\r\n\r\nexport type ActionsIns<S, Ins> = { [K in keyof Ins]: Ins[K] extends () => any ? EmptyActionCreator : Ins[K] extends (data: infer P) => any ? ActionCreator<P> : never };\r\n\r\nexport function exportModel<S, A extends { [K in keyof A]: (payload?) => S | SagaIterator }>(namespace: string, initState: S, actions: A): { namespace: string; actions: ActionsIns<S, A> } {\r\n  (actions as any).namespace = namespace;\r\n  (actions as any).initState = initState;\r\n  return { namespace, actions } as any;\r\n}\r\n","import { ActionCreatorList, ActionHandler, ActionHandlerList, ActionHandlerMap, INIT, INIT_LOCATION, LOCATION_CHANGE, MetaData, Model, NSP, START } from \"./global\";\r\n\r\nconst hasInjected: { [moduleName: string]: boolean } = {};\r\n\r\nexport function exportViews<T>(views: T, model: Model) {\r\n  const namespace = model.namespace;\r\n  if (!hasInjected[namespace]) {\r\n    const locationChangeHandler = model.actions[LOCATION_CHANGE];\r\n    if (locationChangeHandler) {\r\n      model.actions[namespace + NSP + INIT_LOCATION] = locationChangeHandler;\r\n    }\r\n    const actions = getModuleActionCreatorList(namespace);\r\n    injectActions(namespace, model.actions, actions);\r\n    hasInjected[namespace] = true;\r\n    const initAction = actions[INIT]();\r\n    const startAction = actions[START]();\r\n    const store = MetaData.singleStore;\r\n    if (store) {\r\n      store.dispatch(initAction);\r\n      store.dispatch(startAction);\r\n    } else {\r\n      MetaData.injectedModules.push(initAction, startAction);\r\n    }\r\n    return views;\r\n  } else {\r\n    throw new Error(`module: ${namespace} has exist!`);\r\n  }\r\n}\r\nexport function exportModule<T>(namespace: string) {\r\n  const actions: T = getModuleActionCreatorList(namespace) as any;\r\n  // if (window[\"Proxy\"]) {\r\n  //   actions = new window[\"Proxy\"](\r\n  //     {},\r\n  //     {\r\n  //       get: (target: {}, key: string) => {\r\n  //         return (data: any) => ({ type: namespace + \"/\" + key, data });\r\n  //       }\r\n  //     }\r\n  //   );\r\n  // } else {\r\n  //   actions = getModuleActions(namespace) as any;\r\n  // }\r\n  return {\r\n    namespace,\r\n    actions,\r\n  };\r\n}\r\nfunction getModuleActionCreatorList(namespace: string) {\r\n  if (MetaData.actionCreatorMap[namespace]) {\r\n    return MetaData.actionCreatorMap[namespace];\r\n  } else {\r\n    const obj = {};\r\n    MetaData.actionCreatorMap[namespace] = obj;\r\n    return obj;\r\n  }\r\n}\r\nfunction bindThis(fun: ActionHandler, thisObj) {\r\n  const newFun = fun.bind(thisObj);\r\n  Object.keys(fun).forEach(key => {\r\n    newFun[key] = fun[key];\r\n  });\r\n\r\n  return newFun as ActionHandler;\r\n}\r\nfunction injectActions(namespace: string, actions: ActionHandlerList, list: ActionCreatorList) {\r\n  for (const actionName in actions) {\r\n    if (typeof actions[actionName] === \"function\") {\r\n      let handler = actions[actionName];\r\n      if (handler.__isReducer__ || handler.__isEffect__) {\r\n        handler = bindThis(handler, actions);\r\n        const arr = actionName.split(NSP);\r\n        if (arr[1]) {\r\n          handler.__isHandler__ = true;\r\n          transformAction(actionName, handler, namespace, handler.__isEffect__ ? MetaData.effectMap : MetaData.reducerMap);\r\n        } else {\r\n          handler.__isHandler__ = false;\r\n          transformAction(namespace + NSP + actionName, handler, namespace, handler.__isEffect__ ? MetaData.effectMap : MetaData.reducerMap);\r\n          list[actionName] = payload => ({ type: namespace + NSP + actionName, payload });\r\n          (actions as ActionCreatorList)[actionName] = list[actionName];\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction transformAction(actionName: string, action: ActionHandler, listenerModule: string, actionHandlerMap: ActionHandlerMap) {\r\n  if (!actionHandlerMap[actionName]) {\r\n    actionHandlerMap[actionName] = {};\r\n  }\r\n  if (actionHandlerMap[actionName][listenerModule]) {\r\n    throw new Error(`Action duplicate or conflict : ${actionName}.`);\r\n  }\r\n  actionHandlerMap[actionName][listenerModule] = action;\r\n  //   if (actionHandlerMap === MetaData.effectMap) {\r\n  //     pushSagaName(actionName);\r\n  //   }\r\n}\r\n"],"names":["tslib_1.__extends","call","put","tslib_1.__decorate","connect","withRouter","Provider","ErrorBoundary","ConnectedRouter","tslib_1.__values","takeEvery","effect","reducer","routerMiddleware","applyMiddleware","createStore","connectRouter","combineReducers","compose"],"mappings":"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"}