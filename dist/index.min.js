"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(require("react")),reactRedux=require("react-redux"),ReactDOM=_interopDefault(require("react-dom")),reactRouterDom=require("react-router-dom"),reactRouterRedux=require("react-router-redux"),redux=require("redux"),createSagaMiddleware=_interopDefault(require("redux-saga")),effects=require("redux-saga/effects"),extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function __extends(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var __assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function __generator(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function __values(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function unwrapExports(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var __DEV__="production"!==process.env.NODE_ENV,warning=function(){};__DEV__&&(warning=function(t,e,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var o=2;o<r;o++)n[o-2]=arguments[o];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var a=0,i="Warning: "+e.replace(/%s/g,function(){return n[a++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(t){}}});var warning_1=warning,NODE_ENV=process.env.NODE_ENV,invariant=function(t,e,n,r,o,a,i,s){if("production"!==NODE_ENV&&void 0===e)throw new Error("invariant requires an error message argument");if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,i,s],l=0;(u=new Error(e.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},invariant_1=invariant;function isAbsolute(t){return"/"===t.charAt(0)}function spliceOne(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}function resolvePathname(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],r=e&&e.split("/")||[],o=t&&isAbsolute(t),a=e&&isAbsolute(e),i=o||a;if(t&&isAbsolute(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var u=r[r.length-1];s="."===u||".."===u||""===u}else s=!1;for(var c=0,l=r.length;l>=0;l--){var d=r[l];"."===d?spliceOne(r,l):".."===d?(spliceOne(r,l),c++):c&&(spliceOne(r,l),c--)}if(!i)for(;c--;c)r.unshift("..");!i||""===r[0]||r[0]&&isAbsolute(r[0])||r.unshift("");var f=r.join("/");return s&&"/"!==f.substr(-1)&&(f+="/"),f}var resolvePathname$1=Object.freeze({default:resolvePathname}),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function valueEqual(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return valueEqual(t,e[n])});var n=void 0===t?"undefined":_typeof(t);if(n!==(void 0===e?"undefined":_typeof(e)))return!1;if("object"===n){var r=t.valueOf(),o=e.valueOf();if(r!==t||o!==e)return valueEqual(r,o);var a=Object.keys(t),i=Object.keys(e);return a.length===i.length&&a.every(function(n){return valueEqual(t[n],e[n])})}return!1}var valueEqual$1=Object.freeze({default:valueEqual}),PathUtils=createCommonjsModule(function(t,e){e.__esModule=!0;e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var n=e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)};e.stripBasename=function(t,e){return n(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",r="",o=e.indexOf("#");-1!==o&&(r=e.substr(o),e=e.substr(0,o));var a=e.indexOf("?");return-1!==a&&(n=e.substr(a),e=e.substr(0,a)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},e.createPath=function(t){var e=t.pathname,n=t.search,r=t.hash,o=e||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}});unwrapExports(PathUtils);var PathUtils_1=PathUtils.addLeadingSlash,PathUtils_2=PathUtils.stripLeadingSlash,PathUtils_3=PathUtils.hasBasename,PathUtils_4=PathUtils.stripBasename,PathUtils_5=PathUtils.stripTrailingSlash,PathUtils_6=PathUtils.parsePath,PathUtils_7=PathUtils.createPath,_resolvePathname=resolvePathname$1&&resolvePathname||resolvePathname$1,_valueEqual=valueEqual$1&&valueEqual||valueEqual$1,LocationUtils=createCommonjsModule(function(t,e){e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=a(_resolvePathname),o=a(_valueEqual);function a(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function(t,e,o,a){var i=void 0;"string"==typeof t?(i=(0,PathUtils.parsePath)(t)).state=e:(void 0===(i=n({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return o&&(i.key=o),a?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=(0,r.default)(i.pathname,a.pathname)):i.pathname=a.pathname:i.pathname||(i.pathname="/"),i},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,o.default)(t.state,e.state)}});unwrapExports(LocationUtils);var LocationUtils_1=LocationUtils.locationsAreEqual,LocationUtils_2=LocationUtils.createLocation,createTransitionManager_1=createCommonjsModule(function(t,e){e.__esModule=!0;var n,r=(n=warning_1)&&n.__esModule?n:{default:n};e.default=function(){var t=null,e=[];return{setPrompt:function(e){return(0,r.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,o,a){if(null!=t){var i="function"==typeof t?t(e,n):t;"string"==typeof i?"function"==typeof o?o(i,a):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),a(!0)):a(!1!==i)}else a(!0)},appendListener:function(t){var n=!0,r=function(){n&&t.apply(void 0,arguments)};return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}}});unwrapExports(createTransitionManager_1);var DOMUtils=createCommonjsModule(function(t,e){e.__esModule=!0;e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}});unwrapExports(DOMUtils);var DOMUtils_1=DOMUtils.canUseDOM,DOMUtils_2=DOMUtils.addEventListener,DOMUtils_3=DOMUtils.removeEventListener,DOMUtils_4=DOMUtils.getConfirmation,DOMUtils_5=DOMUtils.supportsHistory,DOMUtils_6=DOMUtils.supportsPopStateOnHashChange,DOMUtils_7=DOMUtils.supportsGoWithoutReloadUsingHash,DOMUtils_8=DOMUtils.isExtraneousPopstateEvent,createBrowserHistory_1=createCommonjsModule(function(t,e){e.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=s(warning_1),a=s(invariant_1),i=s(createTransitionManager_1);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){try{return window.history.state||{}}catch(t){return{}}};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(DOMUtils.canUseDOM,"Browser history needs a DOM");var e=window.history,s=(0,DOMUtils.supportsHistory)(),c=!(0,DOMUtils.supportsPopStateOnHashChange)(),l=t.forceRefresh,d=void 0!==l&&l,f=t.getUserConfirmation,p=void 0===f?DOMUtils.getConfirmation:f,h=t.keyLength,v=void 0===h?6:h,_=t.basename?(0,PathUtils.stripTrailingSlash)((0,PathUtils.addLeadingSlash)(t.basename)):"",g=function(t){var e=t||{},n=e.key,r=e.state,a=window.location,i=a.pathname+a.search+a.hash;return(0,o.default)(!_||(0,PathUtils.hasBasename)(i,_),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+_+'".'),_&&(i=(0,PathUtils.stripBasename)(i,_)),(0,LocationUtils.createLocation)(i,r,n)},m=function(){return Math.random().toString(36).substr(2,v)},y=(0,i.default)(),E=function(t){r(U,t),U.length=e.length,y.notifyListeners(U.location,U.action)},O=function(t){(0,DOMUtils.isExtraneousPopstateEvent)(t)||b(g(t.state))},w=function(){b(g(u()))},A=!1,b=function(t){A?(A=!1,E()):y.confirmTransitionTo(t,"POP",p,function(e){e?E({action:"POP",location:t}):M(t)})},M=function(t){var e=U.location,n=C.indexOf(e.key);-1===n&&(n=0);var r=C.indexOf(t.key);-1===r&&(r=0);var o=n-r;o&&(A=!0,T(o))},N=g(u()),C=[N.key],P=function(t){return _+(0,PathUtils.createPath)(t)},T=function(t){e.go(t)},L=0,x=function(t){1===(L+=t)?((0,DOMUtils.addEventListener)(window,"popstate",O),c&&(0,DOMUtils.addEventListener)(window,"hashchange",w)):0===L&&((0,DOMUtils.removeEventListener)(window,"popstate",O),c&&(0,DOMUtils.removeEventListener)(window,"hashchange",w))},S=!1,U={length:e.length,action:"POP",location:N,createHref:P,push:function(t,r){(0,o.default)(!("object"===(void 0===t?"undefined":n(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,LocationUtils.createLocation)(t,r,m(),U.location);y.confirmTransitionTo(a,"PUSH",p,function(t){if(t){var n=P(a),r=a.key,i=a.state;if(s)if(e.pushState({key:r,state:i},null,n),d)window.location.href=n;else{var u=C.indexOf(U.location.key),c=C.slice(0,-1===u?0:u+1);c.push(a.key),C=c,E({action:"PUSH",location:a})}else(0,o.default)(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=n}})},replace:function(t,r){(0,o.default)(!("object"===(void 0===t?"undefined":n(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,LocationUtils.createLocation)(t,r,m(),U.location);y.confirmTransitionTo(a,"REPLACE",p,function(t){if(t){var n=P(a),r=a.key,i=a.state;if(s)if(e.replaceState({key:r,state:i},null,n),d)window.location.replace(n);else{var u=C.indexOf(U.location.key);-1!==u&&(C[u]=a.key),E({action:"REPLACE",location:a})}else(0,o.default)(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(n)}})},go:T,goBack:function(){return T(-1)},goForward:function(){return T(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=y.setPrompt(t);return S||(x(1),S=!0),function(){return S&&(S=!1,x(-1)),e()}},listen:function(t){var e=y.appendListener(t);return x(1),function(){x(-1),e()}}};return U}}),createHistory=unwrapExports(createBrowserHistory_1),ERROR_ACTION_NAME="@@framework/ERROR",LOADING_ACTION_NAME="LOADING",INIT_MODULE_ACTION_NAME="INIT",INIT_LOCATION_ACTION_NAME="@@router/LOCATION_CHANGE",LOCATION_CHANGE_ACTION_NAME="@@router/LOCATION_CHANGE",NSP="_";function errorAction(t){return{type:ERROR_ACTION_NAME,error:t}}function loadingAction(t,e,n){return{type:t+NSP+LOADING_ACTION_NAME,data:(r={},r[e]=n,r)};var r}function initModuleAction(t,e){return{type:t+NSP+INIT_MODULE_ACTION_NAME,data:e}}function initLocationAction(t,e){return{type:t+NSP+INIT_LOCATION_ACTION_NAME,data:e}}var Component=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={message:""},e}return __extends(e,t),e.prototype.render=function(){return this.state.message?React.createElement("div",null,"failed to render, error: ",this.state.message):this.props.children},e.prototype.componentDidCatch=function(t){this.setState({message:t.message}),this.props.dispatch(errorAction(t))},e}(React.PureComponent),mapDispatchToProps=function(t){return{dispatch:t}},ErrorBoundary=reactRedux.connect(null,mapDispatchToProps)(Component);function buildApp(t,e,n,r,o,a){var i=reactRouterDom.withRouter(t);ReactDOM.render(React.createElement(reactRedux.Provider,{store:o},React.createElement(ErrorBoundary,null,React.createElement(reactRouterRedux.ConnectedRouter,{history:a},React.createElement(i,null)))),document.getElementById(e))}function emptyObject(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e.forEach(function(e){delete t[e]}),t}function findIndexInArray(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return n;return-1}var TaskCountEvent="TaskCountEvent",TaskCounterState={Start:"Start",Stop:"Stop",Depth:"Depth"},PEvent=function(){function t(t,e,n){void 0===n&&(n=!1),this.name=t,this.data=e,this.bubbling=n}return t.prototype.setTarget=function(t){this.target=t},t.prototype.setCurrentTarget=function(t){this.currentTarget=t},t}(),PDispatcher=function(){function t(t){this.parent=t,this._handlers={}}return t.prototype.addListener=function(t,e){var n=this._handlers[t];return n||(this._handlers[t]=n=[]),n.push(e),this},t.prototype.removeListener=function(t,e){if(t){var n=this._handlers;if(n.propertyIsEnumerable(t)){var r=n[t];if(e){var o=r.indexOf(e);o>-1&&r.splice(o,1),0===r.length&&delete n[t]}else delete n[t]}}else emptyObject(this._handlers);return this},t.prototype.dispatch=function(t){t.target||t.setTarget(this),t.setCurrentTarget(this);var e=this._handlers[t.name];if(e)for(var n=0,r=e.length;n<r;n++)e[n](t);return this.parent&&t.bubbling&&this.parent.dispatch(t),this},t.prototype.setParent=function(t){return this.parent=t,this},t}(),TaskCounter=function(t){function e(e){var n=t.call(this)||this;return n.deferSecond=e,n.list=[],n}return __extends(e,t),e.prototype.addItem=function(t,e){var n=this;return void 0===e&&(e=""),this.list.some(function(e){return e.promise===t})||(this.list.push({promise:t,note:e}),t.then(function(e){return n.completeItem(t)},function(e){return n.completeItem(t)}),1===this.list.length&&(this.dispatch(new PEvent(TaskCountEvent,TaskCounterState.Start)),this._timer=window.setTimeout(function(){n._timer=0,n.list.length>0&&n.dispatch(new PEvent(TaskCountEvent,TaskCounterState.Depth))},1e3*this.deferSecond))),t},e.prototype.completeItem=function(t){var e=findIndexInArray(this.list,function(e){return e.promise===t});return e>-1&&(this.list.splice(e,1),0===this.list.length&&(this._timer&&(clearTimeout(this._timer),this._timer=0),this.dispatch(new PEvent(TaskCountEvent,TaskCounterState.Stop)))),this},e}(PDispatcher),reducers={router:reactRouterRedux.routerReducer},sagaMiddleware=createSagaMiddleware(),devtools=function(t){return function(t){return t}};function initStore(t,e,n){var r=reactRouterRedux.routerMiddleware(n),o=t.concat([r,sagaMiddleware]),a=e.concat([redux.applyMiddleware.apply(void 0,o),devtools(window.__REDUX_DEVTOOLS_EXTENSION__OPTIONS)]);return{store:redux.createStore(redux.combineReducers(reducers),{},redux.compose.apply(void 0,a)),reducers:reducers,sagaMiddleware:sagaMiddleware}}"production"!==process.env.NODE_ENV&&window.__REDUX_DEVTOOLS_EXTENSION__&&(devtools=window.__REDUX_DEVTOOLS_EXTENSION__);var lastLocationAction,_store=void 0,sagasMap={},reducersMap={},sagaNames=[];function getActionData(t){var e=Object.keys(t).filter(function(t){return"type"!==t});if(0!==e.length){if(1===e.length)return t[e[0]];var n=__assign({},t);return delete n.type,n}}function reducer(t,e){void 0===t&&(t={}),e.type===LOCATION_CHANGE_ACTION_NAME&&(lastLocationAction=getActionData(e));var n=reducersMap[e.type];if(n&&_store){var r=_store.getState(),o=__assign({},t);return Object.keys(n).forEach(function(a){var i=n[a],s=i.__decorators__;s&&s.forEach(function(t){t[2]=t[0](e.type,a)}),o[a]=i(getActionData(e),t[a],r),lastLocationAction&&e.type===a+NSP+INIT_MODULE_ACTION_NAME&&setTimeout(function(){_store&&_store.dispatch(initLocationAction(a,lastLocationAction))},0),s&&s.forEach(function(t){t[1](t[2],o[a]),t[2]=null})}),o}return t}function sagaHandler(t){var e,n,r,o,a,i,s;return __generator(this,function(u){switch(u.label){case 0:if(!(e=sagasMap[t.type])||!_store)return[3,4];n=_store.getState(),r=Object.keys(e),o=function(r){var o,a,i,s,u;return __generator(this,function(c){switch(c.label){case 0:o=e[r],a=n.project[r],i=o.__decorators__,s=void 0,i&&i.forEach(function(e){e[2]=e[0](t.type,r)}),c.label=1;case 1:return c.trys.push([1,3,,4]),[5,__values(o(getActionData(t),a,n))];case 2:return c.sent(),[3,4];case 3:return u=c.sent(),s=u,[3,4];case 4:return s?[4,effects.put(errorAction(s))]:[3,6];case 5:c.sent(),c.label=6;case 6:return i&&i.forEach(function(t){t[1](t[2],s),t[2]=null}),[2]}})},a=0,i=r,u.label=1;case 1:return a<i.length?(s=i[a],[5,o(s)]):[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return[2]}})}function saga(){return __generator(this,function(t){switch(t.label){case 0:return[4,effects.takeEvery(sagaNames,sagaHandler)];case 1:return t.sent(),[2]}})}function buildStore(t,e,n,r){var o=initStore(e,n,t),a=o.store,i=o.reducers,s=o.sagaMiddleware;return _store=a,i.project=reducer,a.replaceReducer(redux.combineReducers(i)),s.run(saga),window.onerror=function(t,e,n,r,o){a.dispatch(errorAction(o||{message:t}))},r.forEach(function(t){a.dispatch(t)}),r.length=0,a}function getStore(){return _store}var loadings={},depthTime=2;function setLoadingDepthTime(t){depthTime=t}function setLoading(t,e,n){void 0===e&&(e="app"),void 0===n&&(n="global");var r=e+"/"+n;return loadings[r]||(loadings[r]=new TaskCounter(depthTime),loadings[r].addListener(TaskCountEvent,function(t){var r=getStore();r&&r.dispatch(loadingAction(e,n,t.data))})),loadings[r].addItem(t),t}var defaultLoadingComponent=function(){return React.createElement("div",{className:"react-coat-asyncComponent-loading"},"Loading...")},defaultErrorComponent=function(t){return React.createElement("div",{className:"react-coat-asyncComponent-error"},"Error: ",t.message)};function asyncComponent(t,e,n,r){void 0===e&&(e="Main"),void 0===n&&(n=defaultLoadingComponent),void 0===r&&(r=defaultErrorComponent);var o=function(o){function a(t,e){var a=o.call(this,t,e)||this;return a.LoadingComponent=n,a.ErrorComponent=r,a.state={Component:null},a}return __extends(a,o),a.prototype.shouldComponentUpdate=function(t,e){return e.Component!==this.state.Component},a.prototype.componentDidMount=function(){var n=this;setLoading(t().then(function(t){var r=t.default[e];n.setState({Component:r})}).catch(function(t){n.errorMessage=t.message;var e=n.ErrorComponent;n.props.dispatch(errorAction(t)),n.setState({Component:e})}))},a.prototype.render=function(){var t=this.state.Component,e=this.LoadingComponent;return t?t===this.ErrorComponent?React.createElement(t,__assign({message:this.errorMessage},this.props)):React.createElement(t,__assign({},this.props)):React.createElement(e,__assign({},this.props))},a}(React.Component);return reactRedux.connect(null,function(t){return{dispatch:t}})(o)}function isGenerator(t){return Boolean(t.__generator__)}function setGenerator(t){return t.__generator__=!0,t}function delayPromise(t){return function(e,n,r){var o=r.value;r.value=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=new Promise(function(e){setTimeout(function(){e(!0)},1e3*t)});return Promise.all([a,o.apply(e,n)]).then(function(t){return t[1]})}}}var sagaNameMap={};function pushSagaName(t){sagaNameMap[t]||(sagaNameMap[t]=!0,sagaNames.push(t))}function transformAction(t,e,n,r){if(r[t]||(r[t]={}),r[t][n])throw new Error("Action duplicate or conflict : "+t+".");r[t][n]=e,r===sagasMap&&pushSagaName(t)}function injectActions(t,e){Object.keys(e).forEach(function(n){transformAction(n,e[n],t,isGenerator(e[n])?sagasMap:reducersMap)})}var _history,injectedModules=[],hasInjected={},actionsProxy={};function buildModule(t){return{namespace:t,actions:actionsProxy}}function buildActionByReducer(t){return t}function buildActionByEffect(t){return setGenerator(t)}function buildLoading(t,e){return void 0===t&&(t="app"),void 0===e&&(e="global"),function(n,r){n[r]||(n[r]=[]),n[r].push([function(){var n=null;return setLoading(new Promise(function(t,e){n=t}),t,e),n},function(t,e){t(e)}])}}function buildlogger(t,e){return function(n,r){n[r]||(n[r]=[]),n[r].push([t,e])}}function translateMap(t){var e=new t,n={};Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},n);var r=t.prototype;for(var o in r)n[o]&&(n[o].__decorators__=r[o]);return n}function buildModel(t,e,n){return{state:t,actions:translateMap(e),handlers:translateMap(n)}}function buildViews(t,e,n){if(!hasInjected[t]){n.actions[t+NSP+INIT_MODULE_ACTION_NAME]=buildActionByReducer(function(t,e,n){return t}),n.actions[t+NSP+LOADING_ACTION_NAME]=buildActionByReducer(function(t,e,n){return __assign({},e,{loading:__assign({},e.loading,t)})});var r=n.handlers[LOCATION_CHANGE_ACTION_NAME];r&&(n.handlers[t+NSP+INIT_LOCATION_ACTION_NAME]=r),injectActions(t,n.actions),injectActions(t,n.handlers),Object.keys(n.actions).forEach(function(t){actionsProxy[t]=function(e){return{type:t,data:e}}}),hasInjected[t]=!0;var o=initModuleAction(t,n.state),a=getStore();a?a.dispatch(o):injectedModules.push(o)}return e}function getHistory(){return _history}function createApp(t,e,n,r,o){void 0===n&&(n=[]),void 0===r&&(r=[]),buildApp(t,e,n,r,buildStore(_history=o||createHistory(),n,r,injectedModules),_history)}exports.buildModule=buildModule,exports.buildActionByReducer=buildActionByReducer,exports.buildActionByEffect=buildActionByEffect,exports.buildLoading=buildLoading,exports.buildlogger=buildlogger,exports.buildModel=buildModel,exports.buildViews=buildViews,exports.getHistory=getHistory,exports.createApp=createApp,exports.getStore=getStore,exports.asyncComponent=asyncComponent,exports.setLoadingDepthTime=setLoadingDepthTime,exports.setLoading=setLoading,exports.LoadingState=TaskCounterState,exports.delayPromise=delayPromise,exports.ERROR_ACTION_NAME=ERROR_ACTION_NAME,exports.LOCATION_CHANGE_ACTION_NAME=LOCATION_CHANGE_ACTION_NAME;
